* Make use of libxml if it's available, then fallback to REXML
* Refactor so as to not do things recursively
* Remove ActiveSupport dependency
